<html>
<head>
  <meta charset="UTF-8">
  <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.min.js"></script>
  <style>
    body {padding: 0; margin: 0;} /* to avoid to show scroll bars*/
    canvas {display: block;}  /* to avoid to show scroll bars*/
  </style>
</head>
<body>
  <div id="p5canvas"></div>
</body>

<script language="javascript" type="text/javascript">

var pts = [];

function setup() {
  var can = createCanvas(windowWidth, windowHeight);
  can.parent("p5canvas");
  background(127);

  for (var i = 0; i < 100; i++) {
    pts.push(new Particle({
      x: random(0, width),
      y: random(0, height),
      vx: random(-2, 2),
      vy: random(-2, 2),
      r: 5,
      area: 70
    })
    );
  }
}

function draw() {
  background(0);
  for(var tmppt of pts){
    tmppt.move();
  }

  for(var tmppt of pts){
    tmppt.show(pts);
  }
}

function Particle(param){
  this.x = param.x;
  this.y = param.y;
  this.vx = param.vx;
  this.vy = param.vy;
  this.r = param.r;
  this.area = param.area;

  this.move = function(){
    this.x += this.vx;
    this.y += this.vy;
    if(this.x < 0) this.x = width;
    else if(width <= this.x) this.x = 0;
    if(this.y < 0) this.y = height;
    else if(height <= this.y) this.y = 0;
  }

  this.show = function(_pts){
    stroke(255);
    noFill();
    ellipse(this.x, this.y, this.r, this.r);

    stroke(127);
    noFill();
    ellipse(this.x, this.y, this.area, this.area);

    for(var tmppt of _pts){
      stroke(255);
      if(dist(this.x, this.y, tmppt.x, tmppt.y) < this.area){
        line(this.x, this.y, tmppt.x, tmppt.y);
      }
    }
  }

}

function windowResized(){
  resizeCanvas(windowWidth, windowHeight);
}

</script>

</html>
